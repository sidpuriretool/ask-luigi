/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/git/prepare/route";
exports.ids = ["app/api/git/prepare/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "module":
/*!*************************!*\
  !*** external "module" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("module");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "readline":
/*!***************************!*\
  !*** external "readline" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("readline");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:events");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fgit%2Fprepare%2Froute&page=%2Fapi%2Fgit%2Fprepare%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgit%2Fprepare%2Froute.ts&appDir=%2FUsers%2Fsid%2Fcoding-projects%2Fask-luigi%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsid%2Fcoding-projects%2Fask-luigi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fgit%2Fprepare%2Froute&page=%2Fapi%2Fgit%2Fprepare%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgit%2Fprepare%2Froute.ts&appDir=%2FUsers%2Fsid%2Fcoding-projects%2Fask-luigi%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsid%2Fcoding-projects%2Fask-luigi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_sid_coding_projects_ask_luigi_app_api_git_prepare_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/git/prepare/route.ts */ \"(rsc)/./app/api/git/prepare/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/git/prepare/route\",\n        pathname: \"/api/git/prepare\",\n        filename: \"route\",\n        bundlePath: \"app/api/git/prepare/route\"\n    },\n    resolvedPagePath: \"/Users/sid/coding-projects/ask-luigi/app/api/git/prepare/route.ts\",\n    nextConfigOutput,\n    userland: _Users_sid_coding_projects_ask_luigi_app_api_git_prepare_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZnaXQlMkZwcmVwYXJlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZnaXQlMkZwcmVwYXJlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZ2l0JTJGcHJlcGFyZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNpZCUyRmNvZGluZy1wcm9qZWN0cyUyRmFzay1sdWlnaSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZzaWQlMkZjb2RpbmctcHJvamVjdHMlMkZhc2stbHVpZ2kmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2lCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvc2lkL2NvZGluZy1wcm9qZWN0cy9hc2stbHVpZ2kvYXBwL2FwaS9naXQvcHJlcGFyZS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZ2l0L3ByZXBhcmUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9naXQvcHJlcGFyZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZ2l0L3ByZXBhcmUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvc2lkL2NvZGluZy1wcm9qZWN0cy9hc2stbHVpZ2kvYXBwL2FwaS9naXQvcHJlcGFyZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fgit%2Fprepare%2Froute&page=%2Fapi%2Fgit%2Fprepare%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgit%2Fprepare%2Froute.ts&appDir=%2FUsers%2Fsid%2Fcoding-projects%2Fask-luigi%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsid%2Fcoding-projects%2Fask-luigi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/git/prepare/route.ts":
/*!**************************************!*\
  !*** ./app/api/git/prepare/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_git__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/git */ \"(rsc)/./lib/git.ts\");\n\n\nasync function POST() {\n    try {\n        const result = await (0,_lib_git__WEBPACK_IMPORTED_MODULE_1__.prepareCodexBranch)();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result);\n    } catch (err) {\n        const message = err instanceof Error ? err.message : \"Failed to prepare codex branch\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dpdC9wcmVwYXJlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQztBQUNJO0FBRXhDLGVBQWVFO0lBQ3BCLElBQUk7UUFDRixNQUFNQyxTQUFTLE1BQU1GLDREQUFrQkE7UUFDdkMsT0FBT0QscURBQVlBLENBQUNJLElBQUksQ0FBQ0Q7SUFDM0IsRUFBRSxPQUFPRSxLQUFLO1FBQ1osTUFBTUMsVUFBVUQsZUFBZUUsUUFBUUYsSUFBSUMsT0FBTyxHQUFHO1FBQ3JELE9BQU9OLHFEQUFZQSxDQUFDSSxJQUFJLENBQUM7WUFBRUksT0FBT0Y7UUFBUSxHQUFHO1lBQUVHLFFBQVE7UUFBSTtJQUM3RDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvc2lkL2NvZGluZy1wcm9qZWN0cy9hc2stbHVpZ2kvYXBwL2FwaS9naXQvcHJlcGFyZS9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IHByZXBhcmVDb2RleEJyYW5jaCB9IGZyb20gXCJAL2xpYi9naXRcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJlcGFyZUNvZGV4QnJhbmNoKCk7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3VsdCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gcHJlcGFyZSBjb2RleCBicmFuY2hcIjtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogbWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJlcGFyZUNvZGV4QnJhbmNoIiwiUE9TVCIsInJlc3VsdCIsImpzb24iLCJlcnIiLCJtZXNzYWdlIiwiRXJyb3IiLCJlcnJvciIsInN0YXR1cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/git/prepare/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/codex.ts":
/*!**********************!*\
  !*** ./lib/codex.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isCodexRunning: () => (/* binding */ isCodexRunning),\n/* harmony export */   resetThread: () => (/* binding */ resetThread),\n/* harmony export */   runCodex: () => (/* binding */ runCodex)\n/* harmony export */ });\n/* harmony import */ var _openai_codex_sdk__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @openai/codex-sdk */ \"(rsc)/./node_modules/@openai/codex-sdk/dist/index.js\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n// Module-level state\nlet client = null;\nlet activeThread = null;\nlet isRunning = false;\nfunction getClient() {\n    if (!client) {\n        // Set CODEX_HOME like html-campaign does\n        const codexHome = path__WEBPACK_IMPORTED_MODULE_0___default().join(process.cwd(), \".codex\");\n        // Create the directory if it doesn't exist\n        if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(codexHome)) {\n            fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(codexHome, {\n                recursive: true\n            });\n        }\n        process.env.CODEX_HOME = codexHome;\n        // Pass API key explicitly so Codex SDK can authenticate\n        client = new _openai_codex_sdk__WEBPACK_IMPORTED_MODULE_2__.Codex({\n            apiKey: process.env.OPENAI_API_KEY\n        });\n    }\n    return client;\n}\n/**\n * Run a prompt against the project. Yields CodexEvent objects.\n *\n * - Creates a new thread on first call, reuses it on subsequent calls\n *   so follow-up prompts have context.\n * - workingDirectory = process.cwd() so Codex edits the actual project files.\n * - sandboxMode = \"workspace-write\" so Codex can modify files.\n * - skipGitRepoCheck = true because we manage git ourselves.\n */ async function* runCodex(prompt) {\n    if (isRunning) {\n        yield {\n            type: \"error\",\n            message: \"A Codex run is already in progress.\"\n        };\n        return;\n    }\n    isRunning = true;\n    try {\n        const codex = getClient();\n        // Start a new thread or reuse existing one\n        if (!activeThread) {\n            activeThread = codex.startThread({\n                workingDirectory: process.cwd(),\n                skipGitRepoCheck: true,\n                sandboxMode: \"workspace-write\"\n            });\n        }\n        const streamedTurn = await activeThread.runStreamed(prompt);\n        for await (const event of streamedTurn.events){\n            // Classify events into our simplified types based on Codex SDK events\n            if (event.type === \"item.completed\" && event.item) {\n                if (event.item.type === \"reasoning\") {\n                    yield {\n                        type: \"plan\",\n                        content: event.item.text\n                    };\n                } else if (event.item.type === \"agent_message\") {\n                    yield {\n                        type: \"message\",\n                        content: event.item.text\n                    };\n                } else if (event.item.type === \"file_change\") {\n                    // Yield a file change event for each change in the patch\n                    for (const change of event.item.changes){\n                        yield {\n                            type: \"file_change\",\n                            path: change.path,\n                            status: change.kind\n                        };\n                    }\n                }\n            }\n            if (event.type === \"error\") {\n                yield {\n                    type: \"error\",\n                    message: event.message\n                };\n            }\n        }\n        yield {\n            type: \"done\"\n        };\n    } catch (err) {\n        const message = err instanceof Error ? err.message : \"Codex run failed\";\n        yield {\n            type: \"error\",\n            message\n        };\n    } finally{\n        isRunning = false;\n    }\n}\n/**\n * Reset the thread (e.g., after deploying, start fresh).\n */ function resetThread() {\n    activeThread = null;\n}\n/**\n * Check if a run is in progress (used by git routes to prevent concurrent operations).\n */ function isCodexRunning() {\n    return isRunning;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBa0Q7QUFDMUI7QUFDSjtBQUVwQixxQkFBcUI7QUFDckIsSUFBSUcsU0FBdUI7QUFDM0IsSUFBSUMsZUFBOEI7QUFDbEMsSUFBSUMsWUFBWTtBQUVoQixTQUFTQztJQUNQLElBQUksQ0FBQ0gsUUFBUTtRQUNYLHlDQUF5QztRQUN6QyxNQUFNSSxZQUFZTixnREFBUyxDQUFDUSxRQUFRQyxHQUFHLElBQUk7UUFDM0MsMkNBQTJDO1FBQzNDLElBQUksQ0FBQ1Isb0RBQWEsQ0FBQ0ssWUFBWTtZQUM3QkwsbURBQVksQ0FBQ0ssV0FBVztnQkFBRU0sV0FBVztZQUFLO1FBQzVDO1FBQ0FKLFFBQVFLLEdBQUcsQ0FBQ0MsVUFBVSxHQUFHUjtRQUN6Qix3REFBd0Q7UUFDeERKLFNBQVMsSUFBSUgsb0RBQUtBLENBQUM7WUFDakJnQixRQUFRUCxRQUFRSyxHQUFHLENBQUNHLGNBQWM7UUFDcEM7SUFDRjtJQUNBLE9BQU9kO0FBQ1Q7QUFVQTs7Ozs7Ozs7Q0FRQyxHQUNNLGdCQUFnQmUsU0FBU0MsTUFBYztJQUM1QyxJQUFJZCxXQUFXO1FBQ2IsTUFBTTtZQUFFZSxNQUFNO1lBQVNDLFNBQVM7UUFBc0M7UUFDdEU7SUFDRjtJQUVBaEIsWUFBWTtJQUVaLElBQUk7UUFDRixNQUFNaUIsUUFBUWhCO1FBRWQsMkNBQTJDO1FBQzNDLElBQUksQ0FBQ0YsY0FBYztZQUNqQkEsZUFBZWtCLE1BQU1DLFdBQVcsQ0FBQztnQkFDL0JDLGtCQUFrQmYsUUFBUUMsR0FBRztnQkFDN0JlLGtCQUFrQjtnQkFDbEJDLGFBQWE7WUFDZjtRQUNGO1FBRUEsTUFBTUMsZUFBZSxNQUFNdkIsYUFBYXdCLFdBQVcsQ0FBQ1Q7UUFFcEQsV0FBVyxNQUFNVSxTQUFTRixhQUFhRyxNQUFNLENBQUU7WUFDN0Msc0VBQXNFO1lBRXRFLElBQUlELE1BQU1ULElBQUksS0FBSyxvQkFBb0JTLE1BQU1FLElBQUksRUFBRTtnQkFDakQsSUFBSUYsTUFBTUUsSUFBSSxDQUFDWCxJQUFJLEtBQUssYUFBYTtvQkFDbkMsTUFBTTt3QkFBRUEsTUFBTTt3QkFBUVksU0FBU0gsTUFBTUUsSUFBSSxDQUFDRSxJQUFJO29CQUFDO2dCQUNqRCxPQUFPLElBQUlKLE1BQU1FLElBQUksQ0FBQ1gsSUFBSSxLQUFLLGlCQUFpQjtvQkFDOUMsTUFBTTt3QkFBRUEsTUFBTTt3QkFBV1ksU0FBU0gsTUFBTUUsSUFBSSxDQUFDRSxJQUFJO29CQUFDO2dCQUNwRCxPQUFPLElBQUlKLE1BQU1FLElBQUksQ0FBQ1gsSUFBSSxLQUFLLGVBQWU7b0JBQzVDLHlEQUF5RDtvQkFDekQsS0FBSyxNQUFNYyxVQUFVTCxNQUFNRSxJQUFJLENBQUNJLE9BQU8sQ0FBRTt3QkFDdkMsTUFBTTs0QkFDSmYsTUFBTTs0QkFDTm5CLE1BQU1pQyxPQUFPakMsSUFBSTs0QkFDakJtQyxRQUFRRixPQUFPRyxJQUFJO3dCQUNyQjtvQkFDRjtnQkFDRjtZQUNGO1lBRUEsSUFBSVIsTUFBTVQsSUFBSSxLQUFLLFNBQVM7Z0JBQzFCLE1BQU07b0JBQUVBLE1BQU07b0JBQVNDLFNBQVNRLE1BQU1SLE9BQU87Z0JBQUM7WUFDaEQ7UUFDRjtRQUVBLE1BQU07WUFBRUQsTUFBTTtRQUFPO0lBQ3ZCLEVBQUUsT0FBT2tCLEtBQUs7UUFDWixNQUFNakIsVUFBVWlCLGVBQWVDLFFBQVFELElBQUlqQixPQUFPLEdBQUc7UUFDckQsTUFBTTtZQUFFRCxNQUFNO1lBQVNDO1FBQVE7SUFDakMsU0FBVTtRQUNSaEIsWUFBWTtJQUNkO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNtQztJQUNkcEMsZUFBZTtBQUNqQjtBQUVBOztDQUVDLEdBQ00sU0FBU3FDO0lBQ2QsT0FBT3BDO0FBQ1QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zaWQvY29kaW5nLXByb2plY3RzL2Fzay1sdWlnaS9saWIvY29kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29kZXgsIFRocmVhZCB9IGZyb20gXCJAb3BlbmFpL2NvZGV4LXNka1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcblxuLy8gTW9kdWxlLWxldmVsIHN0YXRlXG5sZXQgY2xpZW50OiBDb2RleCB8IG51bGwgPSBudWxsO1xubGV0IGFjdGl2ZVRocmVhZDogVGhyZWFkIHwgbnVsbCA9IG51bGw7XG5sZXQgaXNSdW5uaW5nID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGdldENsaWVudCgpOiBDb2RleCB7XG4gIGlmICghY2xpZW50KSB7XG4gICAgLy8gU2V0IENPREVYX0hPTUUgbGlrZSBodG1sLWNhbXBhaWduIGRvZXNcbiAgICBjb25zdCBjb2RleEhvbWUgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCIuY29kZXhcIik7XG4gICAgLy8gQ3JlYXRlIHRoZSBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgIGlmICghZnMuZXhpc3RzU3luYyhjb2RleEhvbWUpKSB7XG4gICAgICBmcy5ta2RpclN5bmMoY29kZXhIb21lLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgcHJvY2Vzcy5lbnYuQ09ERVhfSE9NRSA9IGNvZGV4SG9tZTtcbiAgICAvLyBQYXNzIEFQSSBrZXkgZXhwbGljaXRseSBzbyBDb2RleCBTREsgY2FuIGF1dGhlbnRpY2F0ZVxuICAgIGNsaWVudCA9IG5ldyBDb2RleCh7XG4gICAgICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiBjbGllbnQ7XG59XG5cbi8vIEV2ZW50IHR5cGVzIHRoZSBBUEkgcm91dGUgd2lsbCBzdHJlYW0gdG8gdGhlIGNsaWVudFxuZXhwb3J0IHR5cGUgQ29kZXhFdmVudCA9XG4gIHwgeyB0eXBlOiBcInBsYW5cIjsgY29udGVudDogc3RyaW5nIH1cbiAgfCB7IHR5cGU6IFwiZmlsZV9jaGFuZ2VcIjsgcGF0aDogc3RyaW5nOyBzdGF0dXM6IHN0cmluZyB9XG4gIHwgeyB0eXBlOiBcIm1lc3NhZ2VcIjsgY29udGVudDogc3RyaW5nIH1cbiAgfCB7IHR5cGU6IFwiZXJyb3JcIjsgbWVzc2FnZTogc3RyaW5nIH1cbiAgfCB7IHR5cGU6IFwiZG9uZVwiIH07XG5cbi8qKlxuICogUnVuIGEgcHJvbXB0IGFnYWluc3QgdGhlIHByb2plY3QuIFlpZWxkcyBDb2RleEV2ZW50IG9iamVjdHMuXG4gKlxuICogLSBDcmVhdGVzIGEgbmV3IHRocmVhZCBvbiBmaXJzdCBjYWxsLCByZXVzZXMgaXQgb24gc3Vic2VxdWVudCBjYWxsc1xuICogICBzbyBmb2xsb3ctdXAgcHJvbXB0cyBoYXZlIGNvbnRleHQuXG4gKiAtIHdvcmtpbmdEaXJlY3RvcnkgPSBwcm9jZXNzLmN3ZCgpIHNvIENvZGV4IGVkaXRzIHRoZSBhY3R1YWwgcHJvamVjdCBmaWxlcy5cbiAqIC0gc2FuZGJveE1vZGUgPSBcIndvcmtzcGFjZS13cml0ZVwiIHNvIENvZGV4IGNhbiBtb2RpZnkgZmlsZXMuXG4gKiAtIHNraXBHaXRSZXBvQ2hlY2sgPSB0cnVlIGJlY2F1c2Ugd2UgbWFuYWdlIGdpdCBvdXJzZWx2ZXMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiogcnVuQ29kZXgocHJvbXB0OiBzdHJpbmcpOiBBc3luY0dlbmVyYXRvcjxDb2RleEV2ZW50PiB7XG4gIGlmIChpc1J1bm5pbmcpIHtcbiAgICB5aWVsZCB7IHR5cGU6IFwiZXJyb3JcIiwgbWVzc2FnZTogXCJBIENvZGV4IHJ1biBpcyBhbHJlYWR5IGluIHByb2dyZXNzLlwiIH07XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaXNSdW5uaW5nID0gdHJ1ZTtcblxuICB0cnkge1xuICAgIGNvbnN0IGNvZGV4ID0gZ2V0Q2xpZW50KCk7XG5cbiAgICAvLyBTdGFydCBhIG5ldyB0aHJlYWQgb3IgcmV1c2UgZXhpc3Rpbmcgb25lXG4gICAgaWYgKCFhY3RpdmVUaHJlYWQpIHtcbiAgICAgIGFjdGl2ZVRocmVhZCA9IGNvZGV4LnN0YXJ0VGhyZWFkKHtcbiAgICAgICAgd29ya2luZ0RpcmVjdG9yeTogcHJvY2Vzcy5jd2QoKSxcbiAgICAgICAgc2tpcEdpdFJlcG9DaGVjazogdHJ1ZSxcbiAgICAgICAgc2FuZGJveE1vZGU6IFwid29ya3NwYWNlLXdyaXRlXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBzdHJlYW1lZFR1cm4gPSBhd2FpdCBhY3RpdmVUaHJlYWQucnVuU3RyZWFtZWQocHJvbXB0KTtcblxuICAgIGZvciBhd2FpdCAoY29uc3QgZXZlbnQgb2Ygc3RyZWFtZWRUdXJuLmV2ZW50cykge1xuICAgICAgLy8gQ2xhc3NpZnkgZXZlbnRzIGludG8gb3VyIHNpbXBsaWZpZWQgdHlwZXMgYmFzZWQgb24gQ29kZXggU0RLIGV2ZW50c1xuXG4gICAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJpdGVtLmNvbXBsZXRlZFwiICYmIGV2ZW50Lml0ZW0pIHtcbiAgICAgICAgaWYgKGV2ZW50Lml0ZW0udHlwZSA9PT0gXCJyZWFzb25pbmdcIikge1xuICAgICAgICAgIHlpZWxkIHsgdHlwZTogXCJwbGFuXCIsIGNvbnRlbnQ6IGV2ZW50Lml0ZW0udGV4dCB9O1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50Lml0ZW0udHlwZSA9PT0gXCJhZ2VudF9tZXNzYWdlXCIpIHtcbiAgICAgICAgICB5aWVsZCB7IHR5cGU6IFwibWVzc2FnZVwiLCBjb250ZW50OiBldmVudC5pdGVtLnRleHQgfTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC5pdGVtLnR5cGUgPT09IFwiZmlsZV9jaGFuZ2VcIikge1xuICAgICAgICAgIC8vIFlpZWxkIGEgZmlsZSBjaGFuZ2UgZXZlbnQgZm9yIGVhY2ggY2hhbmdlIGluIHRoZSBwYXRjaFxuICAgICAgICAgIGZvciAoY29uc3QgY2hhbmdlIG9mIGV2ZW50Lml0ZW0uY2hhbmdlcykge1xuICAgICAgICAgICAgeWllbGQge1xuICAgICAgICAgICAgICB0eXBlOiBcImZpbGVfY2hhbmdlXCIsXG4gICAgICAgICAgICAgIHBhdGg6IGNoYW5nZS5wYXRoLFxuICAgICAgICAgICAgICBzdGF0dXM6IGNoYW5nZS5raW5kLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwiZXJyb3JcIikge1xuICAgICAgICB5aWVsZCB7IHR5cGU6IFwiZXJyb3JcIiwgbWVzc2FnZTogZXZlbnQubWVzc2FnZSB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHlpZWxkIHsgdHlwZTogXCJkb25lXCIgfTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkNvZGV4IHJ1biBmYWlsZWRcIjtcbiAgICB5aWVsZCB7IHR5cGU6IFwiZXJyb3JcIiwgbWVzc2FnZSB9O1xuICB9IGZpbmFsbHkge1xuICAgIGlzUnVubmluZyA9IGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogUmVzZXQgdGhlIHRocmVhZCAoZS5nLiwgYWZ0ZXIgZGVwbG95aW5nLCBzdGFydCBmcmVzaCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldFRocmVhZCgpIHtcbiAgYWN0aXZlVGhyZWFkID0gbnVsbDtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHJ1biBpcyBpbiBwcm9ncmVzcyAodXNlZCBieSBnaXQgcm91dGVzIHRvIHByZXZlbnQgY29uY3VycmVudCBvcGVyYXRpb25zKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ29kZXhSdW5uaW5nKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNSdW5uaW5nO1xufVxuIl0sIm5hbWVzIjpbIkNvZGV4IiwicGF0aCIsImZzIiwiY2xpZW50IiwiYWN0aXZlVGhyZWFkIiwiaXNSdW5uaW5nIiwiZ2V0Q2xpZW50IiwiY29kZXhIb21lIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwiZW52IiwiQ09ERVhfSE9NRSIsImFwaUtleSIsIk9QRU5BSV9BUElfS0VZIiwicnVuQ29kZXgiLCJwcm9tcHQiLCJ0eXBlIiwibWVzc2FnZSIsImNvZGV4Iiwic3RhcnRUaHJlYWQiLCJ3b3JraW5nRGlyZWN0b3J5Iiwic2tpcEdpdFJlcG9DaGVjayIsInNhbmRib3hNb2RlIiwic3RyZWFtZWRUdXJuIiwicnVuU3RyZWFtZWQiLCJldmVudCIsImV2ZW50cyIsIml0ZW0iLCJjb250ZW50IiwidGV4dCIsImNoYW5nZSIsImNoYW5nZXMiLCJzdGF0dXMiLCJraW5kIiwiZXJyIiwiRXJyb3IiLCJyZXNldFRocmVhZCIsImlzQ29kZXhSdW5uaW5nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/codex.ts\n");

/***/ }),

/***/ "(rsc)/./lib/git.ts":
/*!********************!*\
  !*** ./lib/git.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBranchAndCommit: () => (/* binding */ createBranchAndCommit),\n/* harmony export */   deployToMain: () => (/* binding */ deployToMain),\n/* harmony export */   getStatus: () => (/* binding */ getStatus),\n/* harmony export */   prepareCodexBranch: () => (/* binding */ prepareCodexBranch)\n/* harmony export */ });\n/* harmony import */ var simple_git__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! simple-git */ \"(rsc)/./node_modules/simple-git/dist/esm/index.js\");\n/* harmony import */ var _codex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./codex */ \"(rsc)/./lib/codex.ts\");\n\n\nconst git = (0,simple_git__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(process.cwd());\nconst BUILD_ARTIFACT_PREFIXES = [\n    \".next/\",\n    \".next-dev/\"\n];\nfunction isBuildArtifact(path) {\n    return BUILD_ARTIFACT_PREFIXES.some((prefix)=>path === prefix.slice(0, -1) || path.startsWith(prefix));\n}\nfunction assertNotRunning() {\n    if ((0,_codex__WEBPACK_IMPORTED_MODULE_1__.isCodexRunning)()) {\n        throw new Error(\"Cannot perform git operations while Codex is running.\");\n    }\n}\nasync function stashBuildArtifactsIfNeeded() {\n    const status = await git.status();\n    const hasBuildArtifacts = status.files.some((file)=>isBuildArtifact(file.path));\n    if (!hasBuildArtifacts) {\n        return false;\n    }\n    const before = await git.stashList();\n    await git.raw([\n        \"stash\",\n        \"push\",\n        \"-u\",\n        \"-m\",\n        \"ask-luigi-temp-build-artifacts\",\n        \"--\",\n        \".next\",\n        \".next-dev\"\n    ]);\n    const after = await git.stashList();\n    return after.total > before.total;\n}\nasync function dropTopStashIfNeeded(shouldDrop) {\n    if (!shouldDrop) {\n        return;\n    }\n    await git.raw([\n        \"stash\",\n        \"drop\",\n        \"stash@{0}\"\n    ]);\n}\nasync function getBaseBranch() {\n    const branches = await git.branchLocal();\n    if (branches.all.includes(\"main\")) {\n        return \"main\";\n    }\n    if (branches.all.includes(\"master\")) {\n        return \"master\";\n    }\n    if (branches.current) {\n        return branches.current;\n    }\n    throw new Error(\"Could not determine base branch.\");\n}\nasync function ensureCleanNonBuildWorkingTree() {\n    const status = await git.status();\n    const meaningfulChanges = status.files.map((file)=>file.path).filter((path)=>!isBuildArtifact(path));\n    if (meaningfulChanges.length > 0) {\n        throw new Error(\"Working tree has uncommitted non-build changes. Commit or stash before continuing.\");\n    }\n}\nasync function stashAllChangesForPrepareIfNeeded() {\n    const status = await git.status();\n    const meaningfulChanges = status.files.map((file)=>file.path).filter((path)=>!isBuildArtifact(path));\n    if (meaningfulChanges.length === 0) {\n        return false;\n    }\n    const before = await git.stashList();\n    await git.raw([\n        \"stash\",\n        \"push\",\n        \"-u\",\n        \"-m\",\n        `ask-luigi-temp-local-changes-${Date.now()}`\n    ]);\n    const after = await git.stashList();\n    return after.total > before.total;\n}\nasync function getStatus() {\n    assertNotRunning();\n    const status = await git.status();\n    const log = await git.log({\n        maxCount: 1\n    });\n    return {\n        branch: status.current,\n        dirty: status.files.map((f)=>f.path).filter((path)=>!isBuildArtifact(path)),\n        lastCommit: log.latest ? {\n            message: log.latest.message,\n            hash: log.latest.hash.slice(0, 7)\n        } : null\n    };\n}\nasync function prepareCodexBranch() {\n    assertNotRunning();\n    const baseBranch = await getBaseBranch();\n    const branchName = `codex/${Date.now()}`;\n    const stashedLocalChanges = await stashAllChangesForPrepareIfNeeded();\n    const stashedBuildArtifacts = stashedLocalChanges ? false : await stashBuildArtifactsIfNeeded();\n    try {\n        const current = (await git.status()).current;\n        if (current !== baseBranch) {\n            await git.raw([\n                \"checkout\",\n                \"-f\",\n                baseBranch\n            ]);\n        }\n        await git.checkoutLocalBranch(branchName);\n    } finally{\n        await dropTopStashIfNeeded(stashedBuildArtifacts);\n    }\n    return {\n        branch: branchName,\n        base: baseBranch,\n        stashedLocalChanges\n    };\n}\nasync function createBranchAndCommit(prompt) {\n    assertNotRunning();\n    const status = await git.status();\n    const meaningfulChanges = status.files.map((file)=>file.path).filter((path)=>!isBuildArtifact(path));\n    if (meaningfulChanges.length === 0) {\n        throw new Error(\"No non-build file changes to commit.\");\n    }\n    const currentBranch = status.current;\n    const branchName = currentBranch && currentBranch.startsWith(\"codex/\") ? currentBranch : `codex/${Date.now()}`;\n    const commitMessage = `codex: ${prompt.trim().slice(0, 80)}`;\n    if (branchName !== currentBranch) {\n        await git.checkoutLocalBranch(branchName);\n    }\n    await git.add(\".\");\n    await git.raw([\n        \"reset\",\n        \"HEAD\",\n        \"--\",\n        \".next\",\n        \".next-dev\"\n    ]);\n    const staged = await git.diff([\n        \"--cached\",\n        \"--name-only\"\n    ]);\n    if (!staged.trim()) {\n        throw new Error(\"No non-build file changes staged for commit.\");\n    }\n    await git.commit(commitMessage);\n    await git.push(\"origin\", branchName, [\n        \"--set-upstream\"\n    ]);\n    return {\n        branch: branchName,\n        commitMessage\n    };\n}\nasync function deployToMain(branchName) {\n    assertNotRunning();\n    if (!branchName || branchName === \"main\" || branchName === \"master\") {\n        throw new Error(\"Invalid branch for deploy.\");\n    }\n    await ensureCleanNonBuildWorkingTree();\n    const stashedBuildArtifacts = await stashBuildArtifactsIfNeeded();\n    try {\n        await git.raw([\n            \"checkout\",\n            \"-f\",\n            \"main\"\n        ]);\n        await git.merge([\n            branchName\n        ]);\n        await git.push(\"origin\", \"main\");\n    } finally{\n        await dropTopStashIfNeeded(stashedBuildArtifacts);\n    }\n    return {\n        merged: branchName,\n        target: \"main\"\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eEMsTUFBTW5CLElBQUlrRSxLQUFLLENBQUM7WUFBQ2hCO1NBQVc7UUFDNUIsTUFBTWxELElBQUlnRSxJQUFJLENBQUMsVUFBVTtJQUMzQixTQUFVO1FBQ1IsTUFBTTFDLHFCQUFxQjhCO0lBQzdCO0lBRUEsT0FBTztRQUFFZSxRQUFRakI7UUFBWWtCLFFBQVE7SUFBTztBQUM5QyIsInNvdXJjZXMiOlsiL1VzZXJzL3NpZC9jb2RpbmctcHJvamVjdHMvYXNrLWx1aWdpL2xpYi9naXQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNpbXBsZUdpdCwgeyBTaW1wbGVHaXQgfSBmcm9tIFwic2ltcGxlLWdpdFwiO1xuaW1wb3J0IHsgaXNDb2RleFJ1bm5pbmcgfSBmcm9tIFwiLi9jb2RleFwiO1xuXG5jb25zdCBnaXQ6IFNpbXBsZUdpdCA9IHNpbXBsZUdpdChwcm9jZXNzLmN3ZCgpKTtcbmNvbnN0IEJVSUxEX0FSVElGQUNUX1BSRUZJWEVTID0gW1wiLm5leHQvXCIsIFwiLm5leHQtZGV2L1wiXTtcblxuZnVuY3Rpb24gaXNCdWlsZEFydGlmYWN0KHBhdGg6IHN0cmluZykge1xuICByZXR1cm4gQlVJTERfQVJUSUZBQ1RfUFJFRklYRVMuc29tZShcbiAgICAocHJlZml4KSA9PiBwYXRoID09PSBwcmVmaXguc2xpY2UoMCwgLTEpIHx8IHBhdGguc3RhcnRzV2l0aChwcmVmaXgpXG4gICk7XG59XG5cbmZ1bmN0aW9uIGFzc2VydE5vdFJ1bm5pbmcoKSB7XG4gIGlmIChpc0NvZGV4UnVubmluZygpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHBlcmZvcm0gZ2l0IG9wZXJhdGlvbnMgd2hpbGUgQ29kZXggaXMgcnVubmluZy5cIik7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gc3Rhc2hCdWlsZEFydGlmYWN0c0lmTmVlZGVkKCkge1xuICBjb25zdCBzdGF0dXMgPSBhd2FpdCBnaXQuc3RhdHVzKCk7XG4gIGNvbnN0IGhhc0J1aWxkQXJ0aWZhY3RzID0gc3RhdHVzLmZpbGVzLnNvbWUoKGZpbGUpID0+XG4gICAgaXNCdWlsZEFydGlmYWN0KGZpbGUucGF0aClcbiAgKTtcblxuICBpZiAoIWhhc0J1aWxkQXJ0aWZhY3RzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgYmVmb3JlID0gYXdhaXQgZ2l0LnN0YXNoTGlzdCgpO1xuICBhd2FpdCBnaXQucmF3KFtcbiAgICBcInN0YXNoXCIsXG4gICAgXCJwdXNoXCIsXG4gICAgXCItdVwiLFxuICAgIFwiLW1cIixcbiAgICBcImFzay1sdWlnaS10ZW1wLWJ1aWxkLWFydGlmYWN0c1wiLFxuICAgIFwiLS1cIixcbiAgICBcIi5uZXh0XCIsXG4gICAgXCIubmV4dC1kZXZcIixcbiAgXSk7XG4gIGNvbnN0IGFmdGVyID0gYXdhaXQgZ2l0LnN0YXNoTGlzdCgpO1xuXG4gIHJldHVybiBhZnRlci50b3RhbCA+IGJlZm9yZS50b3RhbDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZHJvcFRvcFN0YXNoSWZOZWVkZWQoc2hvdWxkRHJvcDogYm9vbGVhbikge1xuICBpZiAoIXNob3VsZERyb3ApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBhd2FpdCBnaXQucmF3KFtcInN0YXNoXCIsIFwiZHJvcFwiLCBcInN0YXNoQHswfVwiXSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEJhc2VCcmFuY2goKSB7XG4gIGNvbnN0IGJyYW5jaGVzID0gYXdhaXQgZ2l0LmJyYW5jaExvY2FsKCk7XG4gIGlmIChicmFuY2hlcy5hbGwuaW5jbHVkZXMoXCJtYWluXCIpKSB7XG4gICAgcmV0dXJuIFwibWFpblwiO1xuICB9XG4gIGlmIChicmFuY2hlcy5hbGwuaW5jbHVkZXMoXCJtYXN0ZXJcIikpIHtcbiAgICByZXR1cm4gXCJtYXN0ZXJcIjtcbiAgfVxuICBpZiAoYnJhbmNoZXMuY3VycmVudCkge1xuICAgIHJldHVybiBicmFuY2hlcy5jdXJyZW50O1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBkZXRlcm1pbmUgYmFzZSBicmFuY2guXCIpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVDbGVhbk5vbkJ1aWxkV29ya2luZ1RyZWUoKSB7XG4gIGNvbnN0IHN0YXR1cyA9IGF3YWl0IGdpdC5zdGF0dXMoKTtcbiAgY29uc3QgbWVhbmluZ2Z1bENoYW5nZXMgPSBzdGF0dXMuZmlsZXNcbiAgICAubWFwKChmaWxlKSA9PiBmaWxlLnBhdGgpXG4gICAgLmZpbHRlcigocGF0aCkgPT4gIWlzQnVpbGRBcnRpZmFjdChwYXRoKSk7XG5cbiAgaWYgKG1lYW5pbmdmdWxDaGFuZ2VzLmxlbmd0aCA+IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIldvcmtpbmcgdHJlZSBoYXMgdW5jb21taXR0ZWQgbm9uLWJ1aWxkIGNoYW5nZXMuIENvbW1pdCBvciBzdGFzaCBiZWZvcmUgY29udGludWluZy5cIlxuICAgICk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gc3Rhc2hBbGxDaGFuZ2VzRm9yUHJlcGFyZUlmTmVlZGVkKCkge1xuICBjb25zdCBzdGF0dXMgPSBhd2FpdCBnaXQuc3RhdHVzKCk7XG4gIGNvbnN0IG1lYW5pbmdmdWxDaGFuZ2VzID0gc3RhdHVzLmZpbGVzXG4gICAgLm1hcCgoZmlsZSkgPT4gZmlsZS5wYXRoKVxuICAgIC5maWx0ZXIoKHBhdGgpID0+ICFpc0J1aWxkQXJ0aWZhY3QocGF0aCkpO1xuXG4gIGlmIChtZWFuaW5nZnVsQ2hhbmdlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBiZWZvcmUgPSBhd2FpdCBnaXQuc3Rhc2hMaXN0KCk7XG4gIGF3YWl0IGdpdC5yYXcoW1xuICAgIFwic3Rhc2hcIixcbiAgICBcInB1c2hcIixcbiAgICBcIi11XCIsXG4gICAgXCItbVwiLFxuICAgIGBhc2stbHVpZ2ktdGVtcC1sb2NhbC1jaGFuZ2VzLSR7RGF0ZS5ub3coKX1gLFxuICBdKTtcbiAgY29uc3QgYWZ0ZXIgPSBhd2FpdCBnaXQuc3Rhc2hMaXN0KCk7XG5cbiAgcmV0dXJuIGFmdGVyLnRvdGFsID4gYmVmb3JlLnRvdGFsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3RhdHVzKCkge1xuICBhc3NlcnROb3RSdW5uaW5nKCk7XG5cbiAgY29uc3Qgc3RhdHVzID0gYXdhaXQgZ2l0LnN0YXR1cygpO1xuICBjb25zdCBsb2cgPSBhd2FpdCBnaXQubG9nKHsgbWF4Q291bnQ6IDEgfSk7XG4gIHJldHVybiB7XG4gICAgYnJhbmNoOiBzdGF0dXMuY3VycmVudCxcbiAgICBkaXJ0eTogc3RhdHVzLmZpbGVzLm1hcCgoZikgPT4gZi5wYXRoKS5maWx0ZXIoKHBhdGgpID0+ICFpc0J1aWxkQXJ0aWZhY3QocGF0aCkpLFxuICAgIGxhc3RDb21taXQ6IGxvZy5sYXRlc3RcbiAgICAgID8geyBtZXNzYWdlOiBsb2cubGF0ZXN0Lm1lc3NhZ2UsIGhhc2g6IGxvZy5sYXRlc3QuaGFzaC5zbGljZSgwLCA3KSB9XG4gICAgICA6IG51bGwsXG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcmVwYXJlQ29kZXhCcmFuY2goKSB7XG4gIGFzc2VydE5vdFJ1bm5pbmcoKTtcblxuICBjb25zdCBiYXNlQnJhbmNoID0gYXdhaXQgZ2V0QmFzZUJyYW5jaCgpO1xuICBjb25zdCBicmFuY2hOYW1lID0gYGNvZGV4LyR7RGF0ZS5ub3coKX1gO1xuICBjb25zdCBzdGFzaGVkTG9jYWxDaGFuZ2VzID0gYXdhaXQgc3Rhc2hBbGxDaGFuZ2VzRm9yUHJlcGFyZUlmTmVlZGVkKCk7XG4gIGNvbnN0IHN0YXNoZWRCdWlsZEFydGlmYWN0cyA9IHN0YXNoZWRMb2NhbENoYW5nZXNcbiAgICA/IGZhbHNlXG4gICAgOiBhd2FpdCBzdGFzaEJ1aWxkQXJ0aWZhY3RzSWZOZWVkZWQoKTtcblxuICB0cnkge1xuICAgIGNvbnN0IGN1cnJlbnQgPSAoYXdhaXQgZ2l0LnN0YXR1cygpKS5jdXJyZW50O1xuICAgIGlmIChjdXJyZW50ICE9PSBiYXNlQnJhbmNoKSB7XG4gICAgICBhd2FpdCBnaXQucmF3KFtcImNoZWNrb3V0XCIsIFwiLWZcIiwgYmFzZUJyYW5jaF0pO1xuICAgIH1cblxuICAgIGF3YWl0IGdpdC5jaGVja291dExvY2FsQnJhbmNoKGJyYW5jaE5hbWUpO1xuICB9IGZpbmFsbHkge1xuICAgIGF3YWl0IGRyb3BUb3BTdGFzaElmTmVlZGVkKHN0YXNoZWRCdWlsZEFydGlmYWN0cyk7XG4gIH1cblxuICByZXR1cm4geyBicmFuY2g6IGJyYW5jaE5hbWUsIGJhc2U6IGJhc2VCcmFuY2gsIHN0YXNoZWRMb2NhbENoYW5nZXMgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJyYW5jaEFuZENvbW1pdChwcm9tcHQ6IHN0cmluZykge1xuICBhc3NlcnROb3RSdW5uaW5nKCk7XG4gIGNvbnN0IHN0YXR1cyA9IGF3YWl0IGdpdC5zdGF0dXMoKTtcbiAgY29uc3QgbWVhbmluZ2Z1bENoYW5nZXMgPSBzdGF0dXMuZmlsZXNcbiAgICAubWFwKChmaWxlKSA9PiBmaWxlLnBhdGgpXG4gICAgLmZpbHRlcigocGF0aCkgPT4gIWlzQnVpbGRBcnRpZmFjdChwYXRoKSk7XG5cbiAgaWYgKG1lYW5pbmdmdWxDaGFuZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vIG5vbi1idWlsZCBmaWxlIGNoYW5nZXMgdG8gY29tbWl0LlwiKTtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRCcmFuY2ggPSBzdGF0dXMuY3VycmVudDtcbiAgY29uc3QgYnJhbmNoTmFtZSA9XG4gICAgY3VycmVudEJyYW5jaCAmJiBjdXJyZW50QnJhbmNoLnN0YXJ0c1dpdGgoXCJjb2RleC9cIilcbiAgICAgID8gY3VycmVudEJyYW5jaFxuICAgICAgOiBgY29kZXgvJHtEYXRlLm5vdygpfWA7XG4gIGNvbnN0IGNvbW1pdE1lc3NhZ2UgPSBgY29kZXg6ICR7cHJvbXB0LnRyaW0oKS5zbGljZSgwLCA4MCl9YDtcblxuICBpZiAoYnJhbmNoTmFtZSAhPT0gY3VycmVudEJyYW5jaCkge1xuICAgIGF3YWl0IGdpdC5jaGVja291dExvY2FsQnJhbmNoKGJyYW5jaE5hbWUpO1xuICB9XG5cbiAgYXdhaXQgZ2l0LmFkZChcIi5cIik7XG4gIGF3YWl0IGdpdC5yYXcoW1wicmVzZXRcIiwgXCJIRUFEXCIsIFwiLS1cIiwgXCIubmV4dFwiLCBcIi5uZXh0LWRldlwiXSk7XG5cbiAgY29uc3Qgc3RhZ2VkID0gYXdhaXQgZ2l0LmRpZmYoW1wiLS1jYWNoZWRcIiwgXCItLW5hbWUtb25seVwiXSk7XG4gIGlmICghc3RhZ2VkLnRyaW0oKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vIG5vbi1idWlsZCBmaWxlIGNoYW5nZXMgc3RhZ2VkIGZvciBjb21taXQuXCIpO1xuICB9XG5cbiAgYXdhaXQgZ2l0LmNvbW1pdChjb21taXRNZXNzYWdlKTtcbiAgYXdhaXQgZ2l0LnB1c2goXCJvcmlnaW5cIiwgYnJhbmNoTmFtZSwgW1wiLS1zZXQtdXBzdHJlYW1cIl0pO1xuXG4gIHJldHVybiB7IGJyYW5jaDogYnJhbmNoTmFtZSwgY29tbWl0TWVzc2FnZSB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVwbG95VG9NYWluKGJyYW5jaE5hbWU6IHN0cmluZykge1xuICBhc3NlcnROb3RSdW5uaW5nKCk7XG5cbiAgaWYgKCFicmFuY2hOYW1lIHx8IGJyYW5jaE5hbWUgPT09IFwibWFpblwiIHx8IGJyYW5jaE5hbWUgPT09IFwibWFzdGVyXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJyYW5jaCBmb3IgZGVwbG95LlwiKTtcbiAgfVxuXG4gIGF3YWl0IGVuc3VyZUNsZWFuTm9uQnVpbGRXb3JraW5nVHJlZSgpO1xuXG4gIGNvbnN0IHN0YXNoZWRCdWlsZEFydGlmYWN0cyA9IGF3YWl0IHN0YXNoQnVpbGRBcnRpZmFjdHNJZk5lZWRlZCgpO1xuXG4gIHRyeSB7XG4gICAgYXdhaXQgZ2l0LnJhdyhbXCJjaGVja291dFwiLCBcIi1mXCIsIFwibWFpblwiXSk7XG4gICAgYXdhaXQgZ2l0Lm1lcmdlKFticmFuY2hOYW1lXSk7XG4gICAgYXdhaXQgZ2l0LnB1c2goXCJvcmlnaW5cIiwgXCJtYWluXCIpO1xuICB9IGZpbmFsbHkge1xuICAgIGF3YWl0IGRyb3BUb3BTdGFzaElmTmVlZGVkKHN0YXNoZWRCdWlsZEFydGlmYWN0cyk7XG4gIH1cblxuICByZXR1cm4geyBtZXJnZWQ6IGJyYW5jaE5hbWUsIHRhcmdldDogXCJtYWluXCIgfTtcbn1cbiJdLCJuYW1lcyI6WyJzaW1wbGVHaXQiLCJpc0NvZGV4UnVubmluZyIsImdpdCIsInByb2Nlc3MiLCJjd2QiLCJCVUlMRF9BUlRJRkFDVF9QUkVGSVhFUyIsImlzQnVpbGRBcnRpZmFjdCIsInBhdGgiLCJzb21lIiwicHJlZml4Iiwic2xpY2UiLCJzdGFydHNXaXRoIiwiYXNzZXJ0Tm90UnVubmluZyIsIkVycm9yIiwic3Rhc2hCdWlsZEFydGlmYWN0c0lmTmVlZGVkIiwic3RhdHVzIiwiaGFzQnVpbGRBcnRpZmFjdHMiLCJmaWxlcyIsImZpbGUiLCJiZWZvcmUiLCJzdGFzaExpc3QiLCJyYXciLCJhZnRlciIsInRvdGFsIiwiZHJvcFRvcFN0YXNoSWZOZWVkZWQiLCJzaG91bGREcm9wIiwiZ2V0QmFzZUJyYW5jaCIsImJyYW5jaGVzIiwiYnJhbmNoTG9jYWwiLCJhbGwiLCJpbmNsdWRlcyIsImN1cnJlbnQiLCJlbnN1cmVDbGVhbk5vbkJ1aWxkV29ya2luZ1RyZWUiLCJtZWFuaW5nZnVsQ2hhbmdlcyIsIm1hcCIsImZpbHRlciIsImxlbmd0aCIsInN0YXNoQWxsQ2hhbmdlc0ZvclByZXBhcmVJZk5lZWRlZCIsIkRhdGUiLCJub3ciLCJnZXRTdGF0dXMiLCJsb2ciLCJtYXhDb3VudCIsImJyYW5jaCIsImRpcnR5IiwiZiIsImxhc3RDb21taXQiLCJsYXRlc3QiLCJtZXNzYWdlIiwiaGFzaCIsInByZXBhcmVDb2RleEJyYW5jaCIsImJhc2VCcmFuY2giLCJicmFuY2hOYW1lIiwic3Rhc2hlZExvY2FsQ2hhbmdlcyIsInN0YXNoZWRCdWlsZEFydGlmYWN0cyIsImNoZWNrb3V0TG9jYWxCcmFuY2giLCJiYXNlIiwiY3JlYXRlQnJhbmNoQW5kQ29tbWl0IiwicHJvbXB0IiwiY3VycmVudEJyYW5jaCIsImNvbW1pdE1lc3NhZ2UiLCJ0cmltIiwiYWRkIiwic3RhZ2VkIiwiZGlmZiIsImNvbW1pdCIsInB1c2giLCJkZXBsb3lUb01haW4iLCJtZXJnZSIsIm1lcmdlZCIsInRhcmdldCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/git.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/simple-git","vendor-chunks/debug","vendor-chunks/@openai","vendor-chunks/@kwsites","vendor-chunks/ms","vendor-chunks/supports-color","vendor-chunks/has-flag"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fgit%2Fprepare%2Froute&page=%2Fapi%2Fgit%2Fprepare%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgit%2Fprepare%2Froute.ts&appDir=%2FUsers%2Fsid%2Fcoding-projects%2Fask-luigi%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsid%2Fcoding-projects%2Fask-luigi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();